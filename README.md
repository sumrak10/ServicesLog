# ServicesLog
#### EN
##### This service helps to track the status of servers and issue their current status, as well as the status history and status history for a certain period.
#### RU
##### Данная служба помогает отслеживать состояния серверов и выдавать их актуальное состояние, так же историю состояний и историю состояний за определенный период.

---

## Подсказка

##### В файле config.yml вы должны подставить данные вашей PostgreSQL
##### В корне проекта апустить виртуальное пространство
##### Загрузить все нужные зависимости из requirements.txt
##### Провести все нужные миграции с помощью alembic

---

# Documentation

##### По умолчанию сервер "опрашивает" другие сервера раз в 1-2 секунды, данный параметр можно поменять.
ServicesLog\ServicesLog\app\views.py 63 строчка
##### Вместо host вы должны подставить адрес на котором работает сервер

---

### POST  ***host/add***  - Добавление сервиса в базу данных для дальнейшего отслеживания

##### Пример json данных который отправляется на сервер

    {
        "name" : "Google", 
        "url" : "https://google.com",
        "des" : "Все знают о нем"
    }
##### Name (уникальное имя) - должно быть уникальным и не превышать 25 символов в длину
##### URL (адрес сервера) - должно не превышать 1024 символов в длину
##### Des (описание) - должно не превышать 1024 символов в длину

##### Пример json данных который отправляет сервер

    {
        "text": "'Google' added to watchlist"
    }
 
---

### GET  ***host/monitor/start***  - Начинает отслеживание состояний серверов добавленных в базу данных с помощью команды выше

##### Пример json данных который отправляет сервер

    {
        "text": "Monitoring started"
    }
 
---

### GET  ***host/monitor/stop***  - Приостанавливает отслеживание состояний серверов

##### Пример json данных который отправляет сервер

    {
        "text": "Monitoring started"
    }
 
---

### GET  ***host/history***  - Вы получаете историю всех сервисов добавленных в БД за все время.

##### Пример json данных который отправляет сервер

    {
        "Google" : {
            "2023-02-06 14:56:26.125072": 200,
            ...
            "2023-02-06 14:56:32.864422": 200
        }
        "YouTube" : {
            "2023-02-06 14:56:26.125072": 200,
            ...
            "2023-02-06 14:56:32.864422": 200
        }
    }
 
---

### GET  ***host/last_statuses***  - Вы получаете последние состояния всех сервисов добавленных в БД

##### Пример json данных который отправляет сервер

    {
        "Google": {
            "URL": "https://google.com",
            "status": 200,
            "last_update": "2023-02-06 14:56:35.935758",
            "SLA": "100.0%",
            "Description": "Все знают о нем"
        }
        "Youtube": {
            "URL": "https://youtube.com",
            "status": 200,
            "last_update": "2023-02-06 14:56:35.935758",
            "SLA": "99.984%",
            "Description": "Самый популярный видеохостинг"
        }
    }
 
---

### POST  ***host/interval***  - Вы получаете все состояния сервера за период.

##### Name - Уникальное имя сервиса которое есть в БД
##### Start - Объект класса Datetime  
##### End - Объект класса Datetime 

##### Пример json данных который отправляет сервер

    {
        "service_name" : "Google",
        "start" : "2023-01-05 21:24:23.100701",
        "end" : "2023-02-05 21:25:27.228283"
    }
 
##### Пример json данных который отправляет сервер

    {
        "Google" : {
            "2023-01-05 21:24:23.100701" : 200,
            ...
            "2023-02-05 21:25:27.228283" : 200
        }
    }
 
---
